(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ticket-offer-application"],{"07c7":function(e,t,n){},1556:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.event.soldOut&&"purchased"!==e.ticketOffer.status?n("ticket-offer-spaces-full"):e.event.ticketSalesActive||"purchased"===e.ticketOffer.status?"pending"===e.ticketOffer.status&&e.ticketOffer.invitedBy&&!e.ticketOffer.invitePaidFor&&e.needsDetails?n("ticket-offer-purchased-update-details",{on:{recalcNeeded:function(t){return e.recalcNeedsDetails()}}}):"pending"===e.ticketOffer.status?n("ticket-offer-pending"):"purchased"===e.ticketOffer.status&&e.needsDetails?n("ticket-offer-purchased-update-details",{on:{recalcNeeded:function(t){return e.recalcNeedsDetails()}}}):"purchased"===e.ticketOffer.status?n("ticket-offer-purchased"):e._e():n("ticket-sales-closed")},r=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),a=n("1f95"),o=n("3218"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("page-content",{attrs:{contentId:e.contentId}},[n("template",{slot:"afterContent"},[n("CopyTicketOffer",{attrs:{"ticket-offer":e.ticketOffer,event:e.event}})],1)],2),n("ticket-offer-form",{on:{submitForm:e.proceedToPurchase}})],1)},l=[],u=(n("7514"),n("b858")),f=n("f568"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.invitedBy&&e.paidFor?[e.invitedBy&&e.paidFor?n("p",[n("strong",{staticClass:"has-text-primary"},[e._v("\n        "+e._s(e.invitedByName)+"\n      ")]),e._v("\n      has bought you a ticket.\n    ")]):e._e(),n("p",[e._v("\n      Update your details below to claim it.\n    ")])]:e.invitedBy?n("p",[e._v("\n    You have been invited by\n    "),n("strong",{staticClass:"has-text-primary"},[e._v(" "+e._s(e.invitedByName)+" ")]),e._v(". This\n    means you got to skip the application process.\n  ")]):e._e(),e.paidFor?e._e():n("p",[e._v("\n    You have the opportunity to purchase\n    "),n("strong",{staticClass:"has-text-primary"},[e._v("\n      "+e._s(e.ticketOffer.ticketCount)+"\n    ")]),e._v("\n    "+e._s(e.plural?"tickets":"ticket")+" for\n    "),n("strong",{staticClass:"has-text-primary"},[e._v(e._s(e.formattedTicketPrice))]),e._v("\n    "+e._s(e.plural?"each":null)+". There "+e._s(e.pluralTickets?"are":"is")+"\n    "),n("strong",{staticClass:"has-text-primary"},[e._v(e._s(e.ticketsLeft))]),e._v("\n    "+e._s(e.pluralTickets?"tickets":"ticket")+" left, please complete the form\n    below and buy your "+e._s(e.plural?"tickets":"ticket")+" now.\n  ")])],2)},d=[],v={name:"CopyTicketOffer",props:{ticketOffer:{type:Object,required:!0},event:{type:Object,required:!0}},computed:{plural:function(){return this.ticketOffer.ticketCount>1},formattedTicketPrice:function(){return"$".concat(this.ticketOffer.costAfterDiscountCents/100)},paidFor:function(){return this.ticketOffer.invitePaidFor},invitedBy:function(){return this.ticketOffer.invitedBy},invitedByName:function(){return"".concat(this.invitedBy.firstName," ").concat(this.invitedBy.lastName)},pluralTickets:function(){return this.ticketsLeft>1},ticketsLeft:function(){return this.event.standardTicketsLeft>3?3:this.event.standardTicketsLeft}}},m=v,h=n("2877"),b=Object(h["a"])(m,p,d,!1,null,null,null),y=b.exports,O=n("6c3f"),k=n("323e"),_=n.n(k),g=n("75cd"),j=n("5003"),C=n("2f62");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $={name:"TicketOfferPending",components:{CopyTicketOffer:y,TicketOfferForm:u["a"],PageContent:f["a"]},mixins:[g["a"],j["a"]],data:function(){return{contentName:"ticket_offer_page_content"}},computed:P(P({},Object(C["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"})),{},{contentId:function(){var e=this;return this.event.pageContent.find((function(t){return t[0]===e.contentName}))[1]},applicationQuestions:function(){return this.person.data},ticketQuestions:function(){return this.person.data},pageTitle:function(){return this.substituteContent(this.content(this.contentName).title,this.person,this.event)},pageSubTitle:function(){return this.substituteContent(this.content(this.contentName).subtitle,this.person,this.event)},pageContent:function(){return this.substituteContent(this.content(this.contentName).body,this.person,this.event)}}),methods:{proceedToPurchase:function(){var e=this;O["a"].updateProfile(this.person.id,{person:{firstName:this.person.firstName,lastName:this.person.lastName,email:this.person.email},profile:P(P({},this.applicationQuestions),this.ticketQuestions)}).then((function(){e.$router.push({name:"ticket-offer-purchase",params:{eventSlug:e.event.slug,id:e.ticketOffer.id}}),_.a.done()})).catch((function(e){_.a.done(),console.log("ERROR",e)}))}}},N=$,q=(n("61cf"),Object(h["a"])(N,c,l,!1,null,null,null)),x=q.exports,T=n("5a0b"),R=n("8cd8");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={name:"TicketOffer",components:{TicketOfferSpacesFull:a["a"],TicketSalesClosed:o["a"],TicketOfferPending:x,TicketOfferPurchasedUpdateDetails:T["a"],TicketOfferPurchased:R["a"]},beforeMount:function(){this.needsDetails=O["a"].calcNeedsDetails(this.person)},data:function(){return{needsDetails:null}},computed:I({},Object(C["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"})),methods:{recalcNeedsDetails:function(){var e=this;this.$store.dispatch("people/getPerson",this.person.id).then((function(){O["a"].calcNeedsDetails(e.person)}))}}},E=A,F=Object(h["a"])(E,i,r,!1,null,null,null);t["default"]=F.exports},2607:function(e,t,n){},3882:function(e,t,n){},"3cc9":function(e,t,n){"use strict";n("8a811")},"40dd":function(e,t,n){"use strict";n("602e")},"5a0b":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[e.ticketOffer.invitedBy?n("page-content",{attrs:{contentId:e.contentId}},[e.ticketOffer.invitePaidFor?n("template",{slot:"beforeContent"},[n("p",[e._v("\n        Hi "+e._s(e.personName)+", "+e._s(e.invitedByName)+" has bought you a ticket to\n        "+e._s(e.event.title)+", we just need a few details before you can claim\n        your ticket.\n      ")]),n("p",[e._v("Please fill in the form below")])]):n("template",{slot:"beforeContent"},[n("p",[e._v("\n        Hi "+e._s(e.personName)+", "+e._s(e.invitedByName)+" has invited you to\n        "+e._s(e.event.title)+".\n      ")]),n("p",[e._v("Please fill in the form below to purchase your ticket")])])],2):e._e(),n("ticket-offer-form",{on:{submitForm:e.proceedToTicket}})],1)},r=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("7514"),n("bd86")),a=n("f568"),o=n("b858"),c=n("6c3f"),l=n("323e"),u=n.n(l),f=n("75cd"),p=n("5003"),d=n("2f62");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={name:"TicketOfferPending",components:{PageContent:a["a"],TicketOfferForm:o["a"]},mixins:[f["a"],p["a"]],data:function(){return{contentName:"ticket_offer_page_content"}},computed:m(m({},Object(d["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"})),{},{contentId:function(){var e=this;return this.event.pageContent.find((function(t){return t[0]===e.contentName}))[1]},invitedByName:function(){var e=this.ticketOffer.invitedBy;return"".concat(e.firstName," ").concat(e.lastName)},applicationQuestions:function(){return this.person.data},ticketQuestions:function(){return this.person.data}}),methods:{proceedToTicket:function(){var e=this;c["a"].updateProfile(this.person.id,{person:{firstName:this.person.firstName,lastName:this.person.lastName,email:this.person.email},profile:m(m({},this.applicationQuestions),this.ticketQuestions)}).then((function(){e.$emit("recalcNeeded"),u.a.done()})).catch((function(e){u.a.done(),console.log("ERROR",e)}))}}},b=h,y=(n("de8f"),n("2877")),O=Object(y["a"])(b,i,r,!1,null,null,null);t["a"]=O.exports},"602e":function(e,t,n){},"61cf":function(e,t,n){"use strict";n("fbd8")},6794:function(e,t,n){"use strict";n("9bed")},"723e":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.event.soldOut&&"purchased"!==e.ticketOffer.status?n("ticket-offer-spaces-full"):e.event.ticketSalesActive||"purchased"===e.ticketOffer.status?n("div",[n("page-content",{attrs:{contentId:e.contentId,titleColumns:9,bodyColumns:8}},[e.event.has_applications?n("CopyInviteAndBuy",{attrs:{slot:"afterContent",allocationLeft:e.allocationLeft,event:e.event},slot:"afterContent"}):e._e()],1),n("section",{staticClass:"container"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-9"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-8"},[n("div",{staticClass:"ticket-container"},[n("h2",{staticClass:"title is-3"},[e._v("Your Ticket Details")]),n("TicketPreview",{attrs:{person:e.person,"ticket-offer":e.ticketOffer,event:e.event}})],1),e.allocationReached?e._e():n("div",{staticClass:"ticket-container columns"},[n("div",{staticClass:"column"},[n("h2",{staticClass:"title is-3"},[e._v("Invite Your Friends and Family")]),n("RecipientDetailsForm",{attrs:{newInvite:e.newInvite,allocationReached:e.allocationReached},on:{"add-invite":function(t){return e.addInvite(t)}}})],1)])]),n("div",{staticClass:"column is-4"},[n("OrderTally",{attrs:{person:e.person,invites:e.invites,paidInviteCount:e.paidInviteCount,ticketPrice:1*e.ticketOffer.costAfterDiscountCents},on:{"remove-invite":function(t){return e.removeInvite(t)},"toggle-invite-paid":function(t){return e.toggleInvitePaid(t)},checkout:e.checkout}})],1)])])])])],1):n("ticket-sales-closed")},r=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("7514"),n("bd86")),a=n("1f95"),o=n("3218"),c=n("b5ae"),l=n("f568"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),n("p",[e._v("\n    You have\n    "),n("strong",{staticClass:"has-text-primary"},[e._v("\n      "+e._s(e.allocationLeft)+"\n    ")]),e._v("\n    "+e._s(e.plural?"opportunities":"opportunity")+"\n    left to purchase tickets for others, or invite them to purchase their own.\n    There\n    "+e._s(e.pluralTickets?"are":"is")+" currently\n    "),n("strong",{staticClass:"has-text-primary"},[e._v(e._s(e.ticketsLeft))]),e._v("\n    "+e._s(e.pluralTickets?"tickets":"ticket")+" left. Don't miss out!\n  ")])])},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("span",{staticClass:"is-size-5"},[e._v("\n      You're almost there!\n    ")])])}],p=(n("c5f6"),{name:"CopyInviteAndBuy",props:{allocationLeft:{type:Number,required:!0},event:{type:Object,required:!0}},computed:{plural:function(){return 1!==this.allocationLeft},pluralTickets:function(){return this.ticketsLeft>1},ticketsLeft:function(){return this.event.standardTicketsLeft>3?3:this.event.standardTicketsLeft}}}),d=p,v=n("2877"),m=Object(v["a"])(d,u,f,!1,null,null,null),h=m.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ticket-preview column"},[n("h3",{staticClass:"title is-4"},[e._v(e._s(e.person.firstName)+" "+e._s(e.person.lastName))]),n("h3",{staticClass:"subtitle is-4"},[e._v(e._s(e.person.email))])])},y=[],O={name:"TicketPreview",props:{person:{type:Object,required:!0},ticketOffer:{type:Object,required:!0},event:{type:Object,required:!0}},computed:{plural:function(){return this.ticketOffer.ticketCount>1}}},k=O,_=(n("6794"),Object(v["a"])(k,b,y,!1,null,null,null)),g=_.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ticket-preview column is-clearfix"},[n("b-field",{attrs:{label:"First Name",horizontal:"",type:{"is-danger":e.$v.invite.firstName.$error},message:e.$v.invite.firstName.$error?"Please enter your first name":""}},[n("b-input",{attrs:{placeholder:"Leslie",disabled:e.allocationReached,type:"text",icon:"account"},on:{blur:function(t){return e.$v.invite.firstName.$touch()}},model:{value:e.invite.firstName,callback:function(t){e.$set(e.invite,"firstName",t)},expression:"invite.firstName"}})],1),n("b-field",{attrs:{label:"Last Name",horizontal:"",type:{"is-danger":e.$v.invite.lastName.$error},message:e.$v.invite.lastName.$error?"Please enter your last name":""}},[n("b-input",{attrs:{placeholder:"Miles",disabled:e.allocationReached,type:"text",icon:"account"},on:{blur:function(t){return e.$v.invite.lastName.$touch()}},model:{value:e.invite.lastName,callback:function(t){e.$set(e.invite,"lastName",t)},expression:"invite.lastName"}})],1),n("b-field",{attrs:{label:"Email",horizontal:"",type:{"is-danger":e.$v.invite.email.$error},message:e.$v.invite.email.$error?"Please enter your email":""}},[n("b-input",{attrs:{placeholder:"francis@example.com",disabled:e.allocationReached,type:"email",icon:"email"},on:{blur:function(t){return e.$v.invite.email.$touch()}},model:{value:e.invite.email,callback:function(t){e.$set(e.invite,"email",t)},expression:"invite.email"}})],1),n("b-field",{attrs:{label:"Paid For?",horizontal:""}},[n("b-checkbox",{attrs:{disabled:e.allocationReached,size:"is-medium"},model:{value:e.invite.paidFor,callback:function(t){e.$set(e.invite,"paidFor",t)},expression:"invite.paidFor"}},[e._v("\n      I will pay for this ticket\n    ")])],1),n("button",{staticClass:"add-button button is-primary is-medium is-pulled-right",attrs:{type:"button",disabled:e.allocationReached},on:{click:function(t){return t.preventDefault(),e.addInvite(t)}}},[e._v("\n    "+e._s(e.buttonText)+"\n  ")])],1)},C=[];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $={name:"RecipientDetailsForm",props:{newInvite:{type:Object,required:!0},buttonText:{type:String,default:"Add Invite"},allocationReached:{type:Boolean,required:!0}},data:function(){return{invite:P({},this.newInvite)}},validations:{invite:{firstName:{required:c["required"]},lastName:{required:c["required"]},email:{required:c["required"],email:c["email"]},paidFor:{}}},methods:{addInvite:function(){this.$v.$touch(),this.$v.$invalid||(this.$emit("add-invite",this.invite),this.invite=P({},this.newInvite),this.$v.$reset())}}},N=$,q=(n("b165"),Object(v["a"])(N,j,C,!1,null,null,null)),x=q.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",[n("h3",{staticClass:"title is-4"},[e._v("Order Tally")]),n("h4",{staticClass:"title is-5"},[e._v("Tickets")]),n("OrderTallyRow",{attrs:{invite:e.person,price:e.formattedTicketPrice,forPurchaser:""}}),e._l(e.invites,(function(t,i){return n("div",[t.paidFor?n("OrderTallyRow",{key:t.email,attrs:{invite:t,price:e.formattedTicketPrice,position:"paid"},on:{"remove-tally-row":function(n){return e.$emit("remove-invite",t.id)},"toggle-invite-paid":function(n){return e.$emit("toggle-invite-paid",t.id)}}}):e._e()],1)})),n("h4",{staticClass:"title is-5"},[e._v("Invites")]),e._l(e.invites,(function(t,i){return n("div",[t.paidFor?e._e():n("OrderTallyRow",{key:t.email,attrs:{invite:t,price:e.formattedTicketPrice,position:"unpaid"},on:{"remove-tally-row":function(n){return e.$emit("remove-invite",t.id)},"toggle-invite-paid":function(n){return e.$emit("toggle-invite-paid",t.id)}}})],1)})),n("div",{staticClass:"tally-row"},[n("div",{staticClass:"tally-row__name"},[e._v("\n      total:\n    ")]),n("div",{staticClass:"tally-row__price"},[e._v("\n      "+e._s(e.formattedOrderTotal)+"\n    ")])]),n("button",{staticClass:"button is-primary is-medium is-fullwidth",attrs:{type:"button",role:"link"},on:{click:function(t){return t.preventDefault(),e.$emit("checkout")}}},[e._v("\n    Checkout\n  ")])],2)},R=[],D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tally-row"},[n("div",{staticClass:"tally-row__name"},[e.forPurchaser?e._e():n("b-tooltip",{staticClass:"tally-row__button",attrs:{label:"Remove "+e.invite.firstName}},[n("b-icon",{attrs:{icon:"close"},nativeOn:{click:function(t){return e.$emit("remove-tally-row")}}})],1),e.forPurchaser?e._e():n("b-tooltip",{staticClass:"tally-row__button",attrs:{label:"Move "+e.invite.firstName+" to "+e.moveText}},[n("b-icon",{attrs:{icon:e.moveIcon},nativeOn:{click:function(t){return e.$emit("toggle-invite-paid")}}})],1),e._v("\n\n    "+e._s(e.invite.firstName)+"\n  ")],1),n("div",{staticClass:"tally-row__price"},[e.invite.paidFor||e.forPurchaser?n("span",[e._v("\n      "+e._s(e.price)+"\n    ")]):n("span",[e._v("\n      free\n    ")])])])},I=[],A={name:"OrderTallyRow",props:{invite:{type:Object,required:!0},price:{type:String,required:!0},position:{type:String,default:"paid"},forPurchaser:{type:Boolean,default:!1}},computed:{moveText:function(){return{paid:"unpaid",unpaid:"paid"}[this.position]},moveIcon:function(){return{paid:"arrow-down-bold-outline",unpaid:"arrow-up-bold-outline"}[this.position]}}},E=A,F=(n("8d90"),Object(v["a"])(E,D,I,!1,null,null,null)),S=F.exports,B={name:"OrderTally",components:{OrderTallyRow:S},props:{person:{type:Object,required:!0},paidInviteCount:{type:Number,required:!0},invites:{type:Array,required:!0},ticketPrice:{type:Number,required:!0}},computed:{formattedTicketPrice:function(){return"$".concat(this.ticketPrice/100)},orderTotal:function(){return(1+this.paidInviteCount)*this.ticketPrice},formattedOrderTotal:function(){return"$".concat(this.orderTotal/100)},plural:function(){return this.ticketOffer.ticketCount>1}}},L=B,U=Object(v["a"])(L,T,R,!1,null,null,null),Y=U.exports,z=n("3c34"),M=n("323e"),Q=n.n(M),H=n("75cd"),V=n("2f62");function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K={name:"TicketOfferPurchase",components:{TicketOfferSpacesFull:a["a"],TicketSalesClosed:o["a"],PageContent:l["a"],CopyInviteAndBuy:h,TicketPreview:g,RecipientDetailsForm:x,OrderTally:Y},props:{existingInvites:{type:Array,required:!0},newInvite:{type:Object,required:!0}},mixins:[H["a"]],data:function(){return{isRejectModalActive:!1,invites:this.existingInvites,invitesOld:[],contentName:"invite_page_content"}},computed:G(G({},Object(V["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer",content:"content/contentByField"})),{},{contentId:function(){var e=this;return this.event.pageContent.find((function(t){return t[0]===e.contentName}))[1]},paidInvites:function(){return this.invites.filter((function(e){return e.paidFor}))},paidInviteCount:function(){return this.paidInvites.length},allocationLeft:function(){return this.ticketOffer.ticketCount-1-this.invites.length},allocationReached:function(){return this.allocationLeft<=0}}),validations:{invites:{required:c["required"],$each:{firstName:{required:c["required"]},lastName:{required:c["required"]},email:{required:c["required"],email:c["email"]},paidFor:{}}}},methods:{addInvite:function(e){var t=this;if(this.allocationReached)return null;e.ticketOfferId=this.ticketOffer.id,z["a"].createInvite(this.event.slug,this.ticketOffer.id,e).then((function(e){t.invites=e.data.invites,e.data.error&&t.$snackbar.open({message:e.data.error,type:"is-danger",position:"is-bottom-left"})})).catch((function(e){console.log("create invite error",e)}))},removeInvite:function(e){var t=this;z["a"].deleteInvite(e).then((function(e){t.invites=e.data.invites})).catch((function(e){console.log("delete invite error",e)}))},toggleInvitePaid:function(e){var t=this,n=this.invites.find((function(t){return t.id===e}));z["a"].updateInvite(e,G(G({},n),{},{paidFor:!n.paidFor})).then((function(e){t.invites=e.data.invites})).catch((function(e){console.log("update invite error",e)}))},checkout:function(){Q.a.start(),z["a"].createStripeSession({ticketOfferId:this.ticketOffer.id,eventId:this.event.id}).then((function(e){var t="pk_live_nYT6MXu8PbzNd1UyYNyUsrDC00FIoSi0hH",n=Stripe(t);n.redirectToCheckout({sessionId:e.data.stripeSessionId}).then((function(e){}))}))}}},X=K,W=(n("40dd"),Object(v["a"])(X,i,r,!1,null,"7e4b92c4",null));t["default"]=W.exports},"8a811":function(e,t,n){},"8cd8":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ticket",{attrs:{person:e.person,event:e.event,ticketOffer:e.ticketOffer}}),n("section",{staticClass:"section"},[n("page-content",{staticClass:"hide-print",attrs:{contentId:e.contentId}}),n("section",{staticClass:"container hide-print"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-6"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.updateInfo(t)}}},[n("fieldset",[n("legend",{staticClass:"label"},[e._v("\n                Dietary Requirements\n              ")]),n("div",{staticClass:"checkbox-row"},e._l(e.dietaryRequirements,(function(t){return n("b-checkbox",{key:t,staticClass:"checkbox-column",attrs:{"native-value":t},model:{value:e.person.data.dietaryRequirements,callback:function(t){e.$set(e.person.data,"dietaryRequirements",t)},expression:"person.data.dietaryRequirements"}},[e._v("\n                  "+e._s(t)+"\n                ")])})),1)]),n("fieldset",[n("legend",{staticClass:"label"},[e._v("\n                Accessibility Requirements\n              ")]),n("div",{staticClass:"checkbox-row"},e._l(e.accessabilityRequirements,(function(t){return n("b-checkbox",{key:t,staticClass:"checkbox-column",attrs:{"native-value":t},model:{value:e.person.data.accessabilityRequirements,callback:function(t){e.$set(e.person.data,"accessabilityRequirements",t)},expression:"person.data.accessabilityRequirements"}},[e._v("\n                  "+e._s(t)+"\n                ")])})),1)]),n("div",{staticClass:"mt-5 buttons is-medium is-pulled-right"},[n("input",{staticClass:"button",attrs:{type:"submit",value:"Update info"}}),e.ticketOffer.invitePaidFor?e._e():n("a",{staticClass:"button",attrs:{href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer"}},[e._v("\n                GST Receipt\n              ")])])])])])])],1)],1)},r=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("7514"),n("bd86")),a=n("3382"),o=n("f568"),c=n("6c3f"),l=n("323e"),u=n.n(l),f=n("75cd"),p=n("b5ae"),d=n("2f62");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={name:"TicketOfferPurchased",components:{PageContent:o["a"],Ticket:a["a"]},mixins:[f["a"]],validations:{person:{firstName:{required:p["required"]},lastName:{required:p["required"]},email:{required:p["required"],email:p["email"]}}},beforeMount:function(){this.$store.dispatch("layouts/setBannerVisibility",!1)},data:function(){return{contentName:"purchased_page_content"}},computed:m(m(m({},Object(d["c"])(["dietaryRequirements","accessabilityRequirements"])),Object(d["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"})),{},{contentId:function(){var e=this;return this.event.pageContent.find((function(t){return t[0]===e.contentName}))[1]},paidFor:function(){return this.ticketOffer.invitePaidFor},invitedBy:function(){return this.ticketOffer.invitedBy},invitedByName:function(){return"".concat(this.invitedBy.firstName," ").concat(this.invitedBy.lastName)},receiptUrl:function(){var e="https://tedxauckland-profiles.herokuapp.com";return"".concat(e,"/receipts/").concat(this.ticketOffer.id)}}),methods:{updateInfo:function(){var e=this;this.$v.$touch(),this.$v.$invalid||(u.a.start(),c["a"].updateProfile(this.person.id,{profile:this.person.data}).then((function(){u.a.done(),e.$snackbar.open("Successfully updated special requirements")})).catch((function(e){u.a.done(),console.log("ERROR",e)})))}}},b=h,y=n("2877"),O=Object(y["a"])(b,i,r,!1,null,null,null);t["a"]=O.exports},"8d90":function(e,t,n){"use strict";n("2607")},"9bed":function(e,t,n){},ac42:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.event.soldOut&&"purchased"!==e.ticketOffer.status?n("ticket-offer-spaces-full"):"pending"===e.ticketOffer.status?n("vip-invite-pending"):"purchased"===e.ticketOffer.status?n("ticket-offer-purchased"):e._e()},r=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),a=n("1f95"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("page-content",{attrs:{contentId:e.contentId}}),e.$v.person?n("section",{staticClass:"container"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-6"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[n("h2",{staticClass:"title has-text-poppins is-5 has-red-stripe"},[e._v("\n            let's first confirm a few details about you\n          ")]),n("b-field",{attrs:{label:"First Name",type:{"is-danger":e.$v.person.firstName.$error},message:e.$v.person.firstName.$error?"Please enter your first name":""}},[n("b-input",{attrs:{placeholder:"Leslie",type:"text",icon:"account"},on:{blur:function(t){return e.$v.person.firstName.$touch()}},model:{value:e.person.firstName,callback:function(t){e.$set(e.person,"firstName",t)},expression:"person.firstName"}})],1),n("b-field",{attrs:{label:"Last Name",type:{"is-danger":e.$v.person.lastName.$error},message:e.$v.person.lastName.$error?"Please enter your last name":""}},[n("b-input",{attrs:{placeholder:"Miles",type:"text",icon:"account"},on:{blur:function(t){return e.$v.person.lastName.$touch()}},model:{value:e.person.lastName,callback:function(t){e.$set(e.person,"lastName",t)},expression:"person.lastName"}})],1),n("b-field",{attrs:{label:"Email",type:{"is-danger":e.$v.person.email.$error||e.errors.email},message:e.errors.email?e.errors.email:""}},[n("b-input",{attrs:{placeholder:"francis@example.com",type:"email",icon:"email"},on:{blur:function(t){return e.$v.person.email.$touch()}},model:{value:e.person.email,callback:function(t){e.$set(e.person,"email",t)},expression:"person.email"}})],1),n("fieldset",[n("legend",{staticClass:"label"},[e._v("\n              Do you have any Dietary Requirements?\n            ")]),n("div",{staticClass:"checkbox-row"},e._l(e.dietaryRequirements,(function(t){return n("b-checkbox",{key:t,staticClass:"checkbox-column",attrs:{"native-value":t},model:{value:e.person.data.dietaryRequirements,callback:function(t){e.$set(e.person.data,"dietaryRequirements",t)},expression:"person.data.dietaryRequirements"}},[e._v("\n                "+e._s(t)+"\n              ")])})),1)]),n("fieldset",[n("legend",{staticClass:"label"},[e._v("\n              Do you have any Accessibility Requirements?\n            ")]),n("div",{staticClass:"checkbox-row"},e._l(e.accessabilityRequirements,(function(t){return n("b-checkbox",{key:t,staticClass:"checkbox-column",attrs:{"native-value":t},model:{value:e.person.data.accessabilityRequirements,callback:function(t){e.$set(e.person.data,"accessabilityRequirements",t)},expression:"person.data.accessabilityRequirements"}},[e._v("\n                "+e._s(t)+"\n              ")])})),1)]),e._m(0)],1)])])]):e._e()],1)},c=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"actions-row buttons is-pulled-right"},[n("input",{staticClass:"button is-medium is-primary",attrs:{type:"submit",value:"Proceed to Invites and Purchase"}})])}],l=(n("7514"),n("f568")),u=n("6c3f"),f=n("323e"),p=n.n(f),d=n("b5ae"),v=n("5003"),m=n("2f62");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={name:"VipInvitePending",components:{PageContent:l["a"]},validations:{person:{firstName:{required:d["required"]},lastName:{required:d["required"]},email:{required:d["required"],email:d["email"]}}},mixins:[v["a"]],data:function(){return{contentName:"vip_ticket_offer_page_content",errors:{}}},methods:{register:function(){var e=this;this.$v.$touch(),this.$v.$invalid||(p.a.start(),u["a"].updateProfile(this.person.id,{person:this.person,profile:this.person.data}).then((function(){p.a.done(),e.$router.push({name:"ticket-offer-purchase",params:{eventSlug:e.event.slug,id:e.ticketOffer.id}})})).catch((function(e){console.log(e)})))}},computed:b(b(b({},Object(m["c"])(["dietaryRequirements","accessabilityRequirements"])),Object(m["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"})),{},{contentId:function(){var e=this;return this.event.pageContent.find((function(t){return t[0]===e.contentName}))[1]}})},O=y,k=(n("3cc9"),n("2877")),_=Object(k["a"])(O,o,c,!1,null,"47d29c13",null),g=_.exports,j=n("8cd8");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P={name:"VipInvite",components:{TicketOfferSpacesFull:a["a"],VipInvitePending:g,TicketOfferPurchased:j["a"]},data:function(){return{status:{pending:"partner-registration"}}},computed:w({},Object(m["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"}))},$=P,N=Object(k["a"])($,i,r,!1,null,null,null);t["default"]=N.exports},b165:function(e,t,n){"use strict";n("bf8c")},bf8c:function(e,t,n){},de8f:function(e,t,n){"use strict";n("07c7")},dfb5:function(e,t,n){"use strict";n("3882")},fbd8:function(e,t,n){},ff89:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("section",{staticClass:"container section-spacing"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-8"},[n("h1",{staticClass:"title is-1"},[e._v("Update Ticket Details")]),n("h1",{staticClass:"subtitle is-2"},[e._v(e._s(e.event.title))])])])]),n("section",{staticClass:"container section-spacing content"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-7"},[n("p",{staticClass:"is-size-4"},[e._v("\n          Hi\n          "),n("span",{staticClass:"has-text-primary"},[e._v(e._s(e.personName))])]),n("p",[e._v("\n          Please update your Ticket information.\n        ")]),e._m(0)])])]),n("section",{staticClass:"container"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-6"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.updateInfo(t)}}},[n("h2",{staticClass:"title has-text-poppins is-5 has-red-stripe"},[e._v("\n            Your Contact Info\n          ")]),n("b-field",{attrs:{label:"First Name",type:{"is-danger":e.$v.personAnswers.firstName.$error},message:e.$v.personAnswers.firstName.$error?"Please enter your first name":""}},[n("b-input",{attrs:{placeholder:"Leslie",type:"text",icon:"account"},on:{blur:function(t){return e.$v.personAnswers.firstName.$touch()}},model:{value:e.personAnswers.firstName,callback:function(t){e.$set(e.personAnswers,"firstName",t)},expression:"personAnswers.firstName"}})],1),n("b-field",{attrs:{label:"Last Name",type:{"is-danger":e.$v.personAnswers.lastName.$error},message:e.$v.personAnswers.lastName.$error?"Please enter your last name":""}},[n("b-input",{attrs:{placeholder:"Miles",type:"text",icon:"account"},on:{blur:function(t){return e.$v.personAnswers.lastName.$touch()}},model:{value:e.personAnswers.lastName,callback:function(t){e.$set(e.personAnswers,"lastName",t)},expression:"personAnswers.lastName"}})],1),n("b-field",{attrs:{label:"Email",type:{"is-danger":e.$v.personAnswers.email.$error||e.errors.email},message:e.errors.email?e.errors.email:""}},[n("b-input",{attrs:{placeholder:"francis@example.com",type:"email",icon:"email"},on:{blur:function(t){return e.$v.personAnswers.email.$touch()}},model:{value:e.personAnswers.email,callback:function(t){e.$set(e.personAnswers,"email",t)},expression:"personAnswers.email"}})],1),n("fieldset",[n("legend",{staticClass:"label"},[e._v("\n              Do you have any Dietary Requirements?\n            ")]),n("div",{staticClass:"checkbox-row"},e._l(e.dietaryRequirements,(function(t){return n("b-checkbox",{key:t,staticClass:"checkbox-column",attrs:{"native-value":t},model:{value:e.personAnswers.data.dietaryRequirements,callback:function(t){e.$set(e.personAnswers.data,"dietaryRequirements",t)},expression:"personAnswers.data.dietaryRequirements"}},[e._v("\n                "+e._s(t)+"\n              ")])})),1)]),n("fieldset",[n("legend",{staticClass:"label"},[e._v("\n              Do you have any Accessibility Requirements?\n            ")]),n("div",{staticClass:"checkbox-row"},e._l(e.accessabilityRequirements,(function(t){return n("b-checkbox",{key:t,staticClass:"checkbox-column",attrs:{"native-value":t},model:{value:e.personAnswers.data.accessabilityRequirements,callback:function(t){e.$set(e.personAnswers.data,"accessabilityRequirements",t)},expression:"personAnswers.data.accessabilityRequirements"}},[e._v("\n                "+e._s(t)+"\n              ")])})),1)]),n("input",{staticClass:"button is-medium is-pulled-right is-primary",attrs:{type:"submit",value:"Update info"}})],1)])])])])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("strong",{staticClass:"has-text-primary"},[e._v("\n            The TEDxAuckland team\n          ")])])}],s=n("6c3f"),a=n("323e"),o=n.n(a),c=n("b5ae"),l=n("75cd"),u={name:"TicketDetails",props:{person:{type:Object,required:!0},ticketOffer:{type:Object,required:!0},event:{type:Object,required:!0}},mixins:[l["a"]],validations:{personAnswers:{firstName:{required:c["required"]},lastName:{required:c["required"]},email:{required:c["required"],email:c["email"]}}},data:function(){return{personAnswers:this.person,errors:{}}},methods:{snackbar:function(){this.$snackbar.open("Default, positioned bottom-right with a green 'OK' button")},updateInfo:function(){var e=this;this.$v.$touch(),this.$v.$invalid||(o.a.start(),s["a"].updateProfile(this.person.id,{person:{firstName:this.personAnswers.firstName,lastName:this.personAnswers.lastName,email:this.personAnswers.email},profile:this.personAnswers.data}).then((function(){o.a.done(),e.$snackbar.open("Successfully updated Ticket Details")})).catch((function(e){o.a.done(),console.log("ERROR",e)})))}},computed:{dietaryRequirements:function(){return this.$store.state.dietaryRequirements},accessabilityRequirements:function(){return this.$store.state.accessabilityRequirements}}},f=u,p=(n("dfb5"),n("2877")),d=Object(p["a"])(f,i,r,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=ticket-offer-application.ea66e77d.js.map