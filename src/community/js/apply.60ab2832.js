(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["apply"],{"07c7":function(e,t,n){},"30ae":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.event.soldOut&&"purchased"!==e.ticketOffer.status?n("ticket-offer-spaces-full"):e.event.ticketSalesActive||"purchased"===e.ticketOffer.status?"pending"===e.ticketOffer.status?n("buy-tickets-pending"):"purchased"===e.ticketOffer.status&&e.needsDetails?n("ticket-offer-purchased-update-details",{on:{recalcNeeded:function(t){return e.recalcNeedsDetails()}}}):"purchased"===e.ticketOffer.status?n("ticket-offer-purchased"):e._e():n("ticket-sales-closed")},i=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),c=n("1f95"),o=n("3218"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("page-content",{attrs:{contentId:e.contentId}}),n("ticket-offer-form",{on:{submitForm:e.proceedToPurchase}})],1)},u=[],p=(n("7514"),n("b858")),l=n("f568"),f=n("6c3f"),d=n("3c34"),O=n("323e"),b=n.n(O),v=n("75cd"),m=n("5003"),h=n("2f62");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={name:"BuyTicketsPending",components:{TicketOfferForm:p["a"],PageContent:l["a"]},mixins:[v["a"],m["a"]],data:function(){return{contentName:"direct_buy_page_content"}},computed:j(j({},Object(h["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"})),{},{contentId:function(){var e=this;return this.event.pageContent.find((function(t){return t[0]===e.contentName}))[1]},applicationQuestions:function(){return this.person.data},ticketQuestions:function(){return this.person.data}}),methods:{proceedToPurchase:function(){var e=this;f["a"].createOrUpdateProfile({person:{firstName:this.person.firstName,lastName:this.person.lastName,email:this.person.email},promoCode:this.$route.query.code,profile:j(j({},this.applicationQuestions),this.ticketQuestions)}).then((function(t){d["a"].createTicketOffer(e.event.slug,{personId:t.data.person.id}).then((function(t){e.$router.push({name:"ticket-offer-purchase",params:{eventSlug:e.event.slug,id:t.data.ticketOffer.id}}),b.a.done()}))})).catch((function(e){b.a.done(),console.log("ERROR",e)}))}}},k=g,P=(n("7cc9"),n("2877")),_=Object(P["a"])(k,a,u,!1,null,null,null),w=_.exports,C=n("5a0b"),D=n("8cd8");function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={name:"BuyTickets",components:{TicketOfferSpacesFull:c["a"],TicketSalesClosed:o["a"],BuyTicketsPending:w,TicketOfferPurchasedUpdateDetails:C["a"],TicketOfferPurchased:D["a"]},beforeMount:function(){this.needsDetails=f["a"].calcNeedsDetails(this.person)},data:function(){return{needsDetails:null}},computed:$({},Object(h["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"})),methods:{recalcNeedsDetails:function(){var e=this;this.$store.dispatch("people/getPerson",this.person.id).then((function(){f["a"].calcNeedsDetails(e.person)}))}}},T=E,R=Object(P["a"])(T,r,i,!1,null,null,null);t["default"]=R.exports},"5a0b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[e.ticketOffer.invitedBy?n("page-content",{attrs:{contentId:e.contentId}},[e.ticketOffer.invitePaidFor?n("template",{slot:"beforeContent"},[n("p",[e._v("\n        Hi "+e._s(e.personName)+", "+e._s(e.invitedByName)+" has bought you a ticket to\n        "+e._s(e.event.title)+", we just need a few details before you can claim\n        your ticket.\n      ")]),n("p",[e._v("Please fill in the form below")])]):n("template",{slot:"beforeContent"},[n("p",[e._v("\n        Hi "+e._s(e.personName)+", "+e._s(e.invitedByName)+" has invited you to\n        "+e._s(e.event.title)+".\n      ")]),n("p",[e._v("Please fill in the form below to purchase your ticket")])])],2):e._e(),n("ticket-offer-form",{on:{submitForm:e.proceedToTicket}})],1)},i=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("7514"),n("bd86")),c=n("f568"),o=n("b858"),a=n("6c3f"),u=n("323e"),p=n.n(u),l=n("75cd"),f=n("5003"),d=n("2f62");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={name:"TicketOfferPending",components:{PageContent:c["a"],TicketOfferForm:o["a"]},mixins:[l["a"],f["a"]],data:function(){return{contentName:"ticket_offer_page_content"}},computed:b(b({},Object(d["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"})),{},{contentId:function(){var e=this;return this.event.pageContent.find((function(t){return t[0]===e.contentName}))[1]},invitedByName:function(){var e=this.ticketOffer.invitedBy;return"".concat(e.firstName," ").concat(e.lastName)},applicationQuestions:function(){return this.person.data},ticketQuestions:function(){return this.person.data}}),methods:{proceedToTicket:function(){var e=this;a["a"].updateProfile(this.person.id,{person:{firstName:this.person.firstName,lastName:this.person.lastName,email:this.person.email},profile:b(b({},this.applicationQuestions),this.ticketQuestions)}).then((function(){e.$emit("recalcNeeded"),p.a.done()})).catch((function(e){p.a.done(),console.log("ERROR",e)}))}}},m=v,h=(n("de8f"),n("2877")),y=Object(h["a"])(m,r,i,!1,null,null,null);t["a"]=y.exports},"7cc9":function(e,t,n){"use strict";n("af7b")},"8cd8":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ticket",{attrs:{person:e.person,event:e.event,ticketOffer:e.ticketOffer}}),n("section",{staticClass:"section"},[n("page-content",{staticClass:"hide-print",attrs:{contentId:e.contentId}}),n("section",{staticClass:"container hide-print"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-6"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.updateInfo(t)}}},[n("fieldset",[n("legend",{staticClass:"label"},[e._v("\n                Dietary Requirements\n              ")]),n("div",{staticClass:"checkbox-row"},e._l(e.dietaryRequirements,(function(t){return n("b-checkbox",{key:t,staticClass:"checkbox-column",attrs:{"native-value":t},model:{value:e.person.data.dietaryRequirements,callback:function(t){e.$set(e.person.data,"dietaryRequirements",t)},expression:"person.data.dietaryRequirements"}},[e._v("\n                  "+e._s(t)+"\n                ")])})),1)]),n("fieldset",[n("legend",{staticClass:"label"},[e._v("\n                Accessibility Requirements\n              ")]),n("div",{staticClass:"checkbox-row"},e._l(e.accessabilityRequirements,(function(t){return n("b-checkbox",{key:t,staticClass:"checkbox-column",attrs:{"native-value":t},model:{value:e.person.data.accessabilityRequirements,callback:function(t){e.$set(e.person.data,"accessabilityRequirements",t)},expression:"person.data.accessabilityRequirements"}},[e._v("\n                  "+e._s(t)+"\n                ")])})),1)]),n("div",{staticClass:"mt-5 buttons is-medium is-pulled-right"},[n("input",{staticClass:"button",attrs:{type:"submit",value:"Update info"}}),e.ticketOffer.invitePaidFor?e._e():n("a",{staticClass:"button",attrs:{href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer"}},[e._v("\n                GST Receipt\n              ")])])])])])])],1)],1)},i=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("7514"),n("bd86")),c=n("3382"),o=n("f568"),a=n("6c3f"),u=n("323e"),p=n.n(u),l=n("75cd"),f=n("b5ae"),d=n("2f62");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={name:"TicketOfferPurchased",components:{PageContent:o["a"],Ticket:c["a"]},mixins:[l["a"]],validations:{person:{firstName:{required:f["required"]},lastName:{required:f["required"]},email:{required:f["required"],email:f["email"]}}},beforeMount:function(){this.$store.dispatch("layouts/setBannerVisibility",!1)},data:function(){return{contentName:"purchased_page_content"}},computed:b(b(b({},Object(d["c"])(["dietaryRequirements","accessabilityRequirements"])),Object(d["c"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"})),{},{contentId:function(){var e=this;return this.event.pageContent.find((function(t){return t[0]===e.contentName}))[1]},paidFor:function(){return this.ticketOffer.invitePaidFor},invitedBy:function(){return this.ticketOffer.invitedBy},invitedByName:function(){return"".concat(this.invitedBy.firstName," ").concat(this.invitedBy.lastName)},receiptUrl:function(){var e="https://tedxauckland-profiles.herokuapp.com";return"".concat(e,"/receipts/").concat(this.ticketOffer.id)}}),methods:{updateInfo:function(){var e=this;this.$v.$touch(),this.$v.$invalid||(p.a.start(),a["a"].updateProfile(this.person.id,{profile:this.person.data}).then((function(){p.a.done(),e.$snackbar.open("Successfully updated special requirements")})).catch((function(e){p.a.done(),console.log("ERROR",e)})))}}},m=v,h=n("2877"),y=Object(h["a"])(m,r,i,!1,null,null,null);t["a"]=y.exports},af7b:function(e,t,n){},c996:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.event.applicationsActive?n("applications-form"):n("applications-closed")},i=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("page-content",{attrs:{contentId:e.contentId}}),n("section",{staticClass:"container"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-6"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.applyForTicket(t)}}},[n("h2",{staticClass:"title is-3"},[e._v("Your Contact Info")]),n("PersonInfo",{staticClass:"section-spacing",attrs:{person:e.person,$v:e.$v}}),n("h2",{staticClass:"title is-3"},[e._v("Application Details")]),n("ApplicationQuestions",{staticClass:"section-spacing",attrs:{validations:e.$v.applicationQuestions},model:{value:e.applicationQuestions,callback:function(t){e.applicationQuestions=t},expression:"applicationQuestions"}}),n("input",{staticClass:"button is-medium is-pulled-right is-primary",attrs:{type:"submit",value:"Apply For Ticket"}})],1)])])])],1)},o=[],a=(n("7514"),n("f568")),u=n("5003"),p=n("0527"),l=n("2964"),f=n("3c34"),d=n("6c3f"),O=n("323e"),b=n.n(O),v=n("16c3"),m=n("2f62");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={name:"ApplicationsForm",components:{PageContent:a["a"],PersonInfo:p["a"],ApplicationQuestions:l["a"]},validations:{person:v["c"],applicationQuestions:v["a"]},mixins:[u["a"]],data:function(){return{contentName:"application_page_content"}},computed:y(y({},Object(m["c"])({event:"events/event",person:"people/person"})),{},{contentId:function(){var e=this;return this.event.pageContent.find((function(t){return t[0]===e.contentName}))[1]},applicationQuestions:function(){return this.person.data}}),methods:{applyForTicket:function(){var e=this;this.$v.$touch(),this.$v.$invalid||(b.a.start(),d["a"].createOrUpdateProfile({person:this.person,profile:this.applicationQuestions}).then((function(t){f["a"].submitApplication(e.event.slug,{personId:t.data.person.id,ref:e.$route.query.ref?e.$route.query.ref:null}).then((function(t){t.data.error?(e.$snackbar.open({message:t.data.error,type:"is-danger",position:"is-bottom-left"}),b.a.done()):e.$router.push({name:"application-status",params:{eventSlug:e.event.slug,id:t.data.applicationId}})})).catch((function(e){console.log("ERROR",e)}))})))}}},g=j,k=n("2877"),P=Object(k["a"])(g,c,o,!1,null,null,null),_=P.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("section",{staticClass:"container section-spacing"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-8"},[n("h1",{staticClass:"title is-1"},[e._v(e._s(e.event.title))]),n("h2",{staticClass:"subtitle is-4"},[e._v("\n          Applications Closed\n        ")])])])]),e._m(0)])},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container section-spacing"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-6"},[n("p",{staticClass:"is-size-5"},[e._v("\n          Sorry Applications for this event have closed.\n        ")])])])])}];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $={name:"ApplicationsClosed",computed:N({},Object(m["c"])({event:"events/event"}))},E=$,T=Object(k["a"])(E,w,C,!1,null,null,null),R=T.exports;function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={name:"Applications",beforeMount:function(){event&&!event.hasTickets&&this.$router.push({name:"404",params:{message:"This event doesn't have Tickets enabled."}})},components:{ApplicationsClosed:R,ApplicationsForm:_},computed:S({},Object(m["c"])({event:"events/event",person:"people/person"}))},I=x,Q=Object(k["a"])(I,r,i,!1,null,null,null);t["default"]=Q.exports},de8f:function(e,t,n){"use strict";n("07c7")}}]);
//# sourceMappingURL=apply.60ab2832.js.map