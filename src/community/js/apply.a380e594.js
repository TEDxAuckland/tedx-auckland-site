(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["apply"],{"30ae":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.event.soldOut&&"purchased"!==t.ticketOffer.status?s("ticket-offer-spaces-full"):t.event.ticketSalesActive||"purchased"===t.ticketOffer.status?"pending"===t.ticketOffer.status?s("buy-tickets-pending"):"purchased"===t.ticketOffer.status&&t.needsDetails?s("ticket-offer-purchased-update-details",{on:{recalcNeeded:function(e){return t.recalcNeedsDetails()}}}):"purchased"===t.ticketOffer.status?s("ticket-offer-purchased"):t._e():s("ticket-sales-closed")},i=[],a=s("cebc"),c=s("1f95"),o=s("3218"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("section",{staticClass:"container section-spacing"},[s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-8"},[s("Markdown",{staticClass:"title is-1",attrs:{input:t.pageTitle,tag:"h1"}}),s("Markdown",{staticClass:"subtitle is-4",attrs:{input:t.pageSubTitle,tag:"h2"}})],1)])]),s("section",{staticClass:"container section-spacing content"},[s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-7"},[s("Markdown",{attrs:{input:t.pageContent}}),t._m(0)],1)])]),s("ticket-offer-form",{on:{submitForm:t.proceedToPurchase}})],1)},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("strong",{staticClass:"has-text-primary"},[t._v("\n            The TEDxAuckland team\n          ")])])}],p=s("b858"),u=s("e6e0"),f=s("70e2"),d=s("6c3f"),h=s("3c34"),v=s("323e"),m=s.n(v),k=s("75cd"),b=s("5003"),C=s("2f62"),g={name:"BuyTicketsPending",components:{Markdown:u["a"],CopyTicketOffer:f["a"],TicketOfferForm:p["a"]},mixins:[k["a"],b["a"]],computed:Object(a["a"])({},Object(C["b"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"}),{applicationQuestions:function(){return this.person.data},ticketQuestions:function(){return this.person.data},pageTitle:function(){return this.substituteContent(this.event.pageTicketOfferTitle,this.person,this.event)},pageSubTitle:function(){return this.substituteContent(this.event.pageTicketOfferSubtitle,this.person,this.event)},pageContent:function(){return this.substituteContent(this.event.pageTicketOfferContentMarkdown,this.person,this.event)}}),methods:{proceedToPurchase:function(){var t=this;d["a"].createProfile({person:{firstName:this.person.firstName,lastName:this.person.lastName,email:this.person.email},profile:Object(a["a"])({},this.applicationQuestions,this.ticketQuestions)}).then(function(e){console.log(e),h["a"].createTicketOffer(t.event.slug,{personId:e.data.person.id}).then(function(e){console.log(e),t.$router.push({name:"ticket-offer-purchase",params:{eventSlug:t.event.slug,id:e.data.ticketOffer.id}}),m.a.done()})}).catch(function(t){m.a.done(),console.log("ERROR",t)})}}},O=g,T=(s("7cc9"),s("2877")),_=Object(T["a"])(O,r,l,!1,null,null,null),$=_.exports,A=s("5a0b"),y=s("8cd8"),j={name:"TicketOfferFromApplication",components:{TicketOfferSpacesFull:c["a"],TicketSalesClosed:o["a"],BuyTicketsPending:$,TicketOfferPurchasedUpdateDetails:A["a"],TicketOfferPurchased:y["a"]},beforeMount:function(){this.needsDetails=this.calcNeedsDetails()},data:function(){return{needsDetails:null}},computed:Object(a["a"])({},Object(C["b"])({event:"events/event",person:"people/person",ticketOffer:"ticketOffers/ticketOffer"})),methods:{recalcNeedsDetails:function(){var t=this;this.$store.dispatch("people/getPerson",this.person.id).then(function(){t.calcNeedsDetails()})},calcNeedsDetails:function(){return!this.person.lastName||!this.person.data.educationLevel||!this.person.data.foundedYesNo||!this.person.data.conversationStarters.one}}},w=j,Q=Object(T["a"])(w,n,i,!1,null,null,null);e["default"]=Q.exports},"7cc9":function(t,e,s){"use strict";var n=s("af7b"),i=s.n(n);i.a},af7b:function(t,e,s){},c996:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.event.applicationsActive?s("applications-form"):s("applications-closed")},i=[],a=s("cebc"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("section",{staticClass:"container section-spacing"},[s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-8"},[s("Markdown",{staticClass:"title is-1",attrs:{input:t.pageTitle,tag:"h1"}}),s("Markdown",{staticClass:"subtitle is-4",attrs:{input:t.pageSubTitle,tag:"h2"}})],1)])]),s("section",{staticClass:"container section-spacing"},[s("div",{staticClass:"columns is-centered content"},[s("div",{staticClass:"column is-6"},[s("Markdown",{attrs:{input:t.pageContent}})],1)])]),s("section",{staticClass:"container"},[s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-6"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.applyForTicket(e)}}},[s("h2",{staticClass:"title is-3"},[t._v("Your Contact Info")]),s("PersonInfo",{staticClass:"section-spacing",attrs:{person:t.person,$v:t.$v}}),s("h2",{staticClass:"title is-3"},[t._v("Application Details")]),s("ApplicationQuestions",{staticClass:"section-spacing",attrs:{validations:t.$v.applicationQuestions},model:{value:t.applicationQuestions,callback:function(e){t.applicationQuestions=e},expression:"applicationQuestions"}}),s("input",{staticClass:"button is-medium is-pulled-right is-primary",attrs:{type:"submit",value:"Apply For Ticket"}})],1)])])])])},o=[],r=s("e6e0"),l=s("5003"),p=s("0527"),u=s("2964"),f=s("3c34"),d=s("6c3f"),h=s("323e"),v=s.n(h),m=s("16c3"),k=s("2f62"),b={name:"ApplicationsForm",components:{Markdown:r["a"],PersonInfo:p["a"],ApplicationQuestions:u["a"]},validations:{person:m["c"],applicationQuestions:m["a"]},mixins:[l["a"]],computed:Object(a["a"])({},Object(k["b"])({event:"events/event",person:"people/person"}),{applicationQuestions:function(){return this.person.data},pageTitle:function(){return this.substituteContent(this.event.pageTicketApplyTitle,this.person,this.event)},pageSubTitle:function(){return this.substituteContent(this.event.pageTicketApplySubtitle,this.person,this.event)},pageContent:function(){return this.substituteContent(this.event.pageTicketApplyContentMarkdown,this.person,this.event)}}),methods:{applyForTicket:function(){var t=this;this.$v.$touch(),this.$v.$invalid||(v.a.start(),d["a"].createProfile({person:this.person,profile:this.applicationQuestions}).then(function(e){f["a"].submitApplication(t.event.slug,{personId:e.data.person.id,ref:t.$route.query.ref?t.$route.query.ref:null}).then(function(e){e.data.error?(t.$snackbar.open({message:e.data.error,type:"is-danger",position:"is-bottom-left"}),v.a.done()):t.$router.push({name:"application-status",params:{eventSlug:t.event.slug,id:e.data.applicationId}})}).catch(function(t){console.log("ERROR",t)})}))}}},C=b,g=s("2877"),O=Object(g["a"])(C,c,o,!1,null,null,null),T=O.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("section",{staticClass:"container section-spacing"},[s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-8"},[s("h1",{staticClass:"title is-1"},[t._v(t._s(t.event.title))]),s("h2",{staticClass:"subtitle is-4"},[t._v("\n          Applications Closed\n        ")])])])]),t._m(0)])},$=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"container section-spacing"},[s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-6"},[s("p",{staticClass:"is-size-5"},[t._v("\n          Sorry Applications for this event have closed.\n        ")])])])])}],A={name:"ApplicationsClosed",computed:Object(a["a"])({},Object(k["b"])({event:"events/event"}))},y=A,j=Object(g["a"])(y,_,$,!1,null,null,null),w=j.exports,Q={name:"Applications",beforeMount:function(){event&&!event.hasTickets&&this.$router.push({name:"404",params:{message:"This event doesn't have Tickets enabled."}})},components:{ApplicationsClosed:w,ApplicationsForm:T},computed:Object(a["a"])({},Object(k["b"])({event:"events/event",person:"people/person"}))},S=Q,D=Object(g["a"])(S,n,i,!1,null,null,null);e["default"]=D.exports}}]);
//# sourceMappingURL=apply.a380e594.js.map